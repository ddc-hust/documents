<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>资料 | 叮咚澈的快乐学习时光</title>
    <meta name="description" content=" ">
    <link rel="stylesheet" href="/documents/assets/style.948f2fd7.css">
    <link rel="modulepreload" href="/documents/assets/app.c840745f.js">
    <link rel="modulepreload" href="/documents/assets/前端监控系统.md.dd3a403c.lean.js">
    
    <link rel="icon" type="image/png" href="pure-logo.svg">
  <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6b5fd0a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-6b5fd0a9 data-v-0e356168><div class="VPNavBar" data-v-0e356168 data-v-8856f192><div class="container" data-v-8856f192><div class="VPNavBarTitle" data-v-8856f192 data-v-6a6f7ff6><a class="title" href="/documents/" data-v-6a6f7ff6><!--[--><img class="VPImage logo" src="/documents/pure-logo.svg" data-v-73ae1788><!--]--><!--[-->叮咚澈的快乐学习时光<!--]--></a></div><div class="content" data-v-8856f192><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8856f192 data-v-a30758ee><span id="main-nav-aria-label" class="visually-hidden" data-v-a30758ee>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->首页<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/frontend/javascript.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->基础<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/vue/vue.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->Vue<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/react/README.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->React<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/algorithm/leetcode.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->算法<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/%E6%89%8B%E5%86%99%E9%A2%98.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->手写题<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/%E5%A4%A7%E6%9D%82%E7%83%A9-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->大杂烩<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/documents/blog/actions.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->文章<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-a30758ee data-v-8dccea88><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-8dccea88><span class="text" data-v-8dccea88><!----> 关于我 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-8dccea88><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-8dccea88><div class="VPMenu" data-v-8dccea88 data-v-e73581a2><div class="items" data-v-e73581a2><!--[--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8856f192 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8856f192 data-v-0ae890f7 data-v-4dcbaf3a><!--[--><a class="VPSocialLink" href="https://github.com/ddc-hust/documents" title="github" target="_blank" rel="noopener noreferrer" data-v-4dcbaf3a data-v-48c45ef6><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-48c45ef6><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-48c45ef6>github</span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8856f192 data-v-0562f5c0 data-v-8dccea88><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8dccea88><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-8dccea88><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-8dccea88><div class="VPMenu" data-v-8dccea88 data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-0562f5c0><div class="item social-links" data-v-0562f5c0><div class="VPSocialLinks social-links-list" data-v-0562f5c0 data-v-4dcbaf3a><!--[--><a class="VPSocialLink" href="https://github.com/ddc-hust/documents" title="github" target="_blank" rel="noopener noreferrer" data-v-4dcbaf3a data-v-48c45ef6><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-48c45ef6><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-48c45ef6>github</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8856f192 data-v-6f008456><span class="container" data-v-6f008456><span class="top" data-v-6f008456></span><span class="middle" data-v-6f008456></span><span class="bottom" data-v-6f008456></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-6b5fd0a9 data-v-a4c57a06><div class="VPDoc" data-v-a4c57a06 data-v-79ca2460><div class="container" data-v-79ca2460><div class="aside" data-v-79ca2460><div class="aside-curtain" data-v-79ca2460></div><div class="aside-container" data-v-79ca2460><div class="aside-content" data-v-79ca2460><div class="VPDocAside" data-v-79ca2460 data-v-779d834d><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-779d834d data-v-51e5a8ce><div class="content" data-v-51e5a8ce><div class="outline-marker" data-v-51e5a8ce></div><div class="outline-title" data-v-51e5a8ce>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-51e5a8ce><span class="visually-hidden" id="doc-outline-aria-label" data-v-51e5a8ce> Table of Contents for current page </span><ul class="root" data-v-51e5a8ce><!--[--><li style="" data-v-51e5a8ce><a class="outline-link" href="#资料" data-v-51e5a8ce>资料</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#简历" data-v-51e5a8ce>简历</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_1-白屏异常监控" data-v-51e5a8ce>1. 白屏异常监控</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_2-性能数据监控" data-v-51e5a8ce>2. 性能数据监控</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_3-性能优化" data-v-51e5a8ce>3. 性能优化</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_4-性能条目" data-v-51e5a8ce>4. 性能条目</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-79ca2460><div class="content-container" data-v-79ca2460><!--[--><!--]--><main class="main" data-v-79ca2460><div style="position:relative;" class="vp-doc _documents_%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F" data-v-79ca2460><div><h2 id="资料" tabindex="-1">资料 <a class="header-anchor" href="#资料" aria-hidden="true">#</a></h2><ol><li>吴汉超前端监控资料：<a href="https://yellowduck.feishu.cn/docx/doxcnyLXv8YCwl0rT1rDXADwzqg" target="_blank" rel="noopener noreferrer">https://yellowduck.feishu.cn/docx/doxcnyLXv8YCwl0rT1rDXADwzqg</a></li><li>答辩资料：<a href="https://yv50sdhtci.feishu.cn/docx/doxcnnn8H6few8g457PcISa1iBc" target="_blank" rel="noopener noreferrer">https://yv50sdhtci.feishu.cn/docx/doxcnnn8H6few8g457PcISa1iBc</a></li><li>开发进度：<a href="https://www.yuque.com/dingdongche/zglet3/lh28fn/edit" target="_blank" rel="noopener noreferrer">https://www.yuque.com/dingdongche/zglet3/lh28fn/edit</a></li></ol><h1 id="前端监控系统" tabindex="-1">前端监控系统 <a class="header-anchor" href="#前端监控系统" aria-hidden="true">#</a></h1><ul><li>技术栈：vue + js + node + webpack</li><li>功能： <ul><li>性能指标监控：FP、FCP、DNSTime, response,DOM Ready(domContentLoadedEventEnd – fetchStart)、responseStart-domainLookupStart <ul><li>使用PerformanceObserver 的 API以及window.performance获取指标信息</li></ul></li><li>JS错误监控 <ul><li><code>window.addEventListener(&#39;error&#39;,())</code></li><li><code>window.onerror</code></li><li>劫持重写vue的errorHandler上报</li></ul></li><li>请求异常监控 <ul><li>拦截fetch请求</li><li>拦截axios请求</li></ul></li><li>用户行为监控： PV、UV、页面停留时间 <ul><li>路由守卫</li><li>UV：通过用户登录的ip以及登录的时间，判断是不是今天第一次登录。登录之后把ip存入localStorage中，第一次登录，会把ip和登录时间放入localstrorage中，之后每一次用户登录时，判断localstorage中有没有对应的ip，没有的话，uv++。有的话，判断时间是不是今天的，如果不是今天的时间，删除localStorage中的ip和时间。是今天的时间的话，就pv++</li><li>对于ip的判断放在全局路由守卫中。router.afterEach</li><li>停留时间是用create的destroy在create中得到用户一进入的时间搓，为提高复用，减少冗余性，采用minin封装，然后在各个组件中引入mixin</li></ul></li><li>白屏异常</li></ul></li><li>需要封装成通用SDK</li><li>流程：数据采集、组装上报、清洗存储、数据消费</li></ul><h2 id="简历" tabindex="-1">简历 <a class="header-anchor" href="#简历" aria-hidden="true">#</a></h2><ul><li>实现白屏异常监控：使用MutationObServer实例对页面主要DOM节点进行监听，判断dom节点是否卸载。</li><li>封装折线图组件：设计以折线图框的方式展示错误数量变化趋势。</li><li>封装Ring组件：以圆环图的方式展示错误占比情况。</li><li>封装Tooltip组件：根据鼠标的位置调整tooltip的位置。</li><li>封装节流：限制Echats图表初始化信息的频率。</li></ul><h2 id="_1-白屏异常监控" tabindex="-1">1. 白屏异常监控 <a class="header-anchor" href="#_1-白屏异常监控" aria-hidden="true">#</a></h2><ol><li>分两种情况： <ul><li>真个页面全是白屏，没有header和sider</li><li>路由页面白屏</li></ul></li><li>监控方法： <ul><li>判断各页面根节点下的dom是否成功渲染。若成功渲染，则不是白屏，否则出现白屏异常</li><li>思考：dom节点渲染成功-一定不是白屏吗？出现白屏时，dom节点一定渲染失败吗？</li></ul></li><li>制造白屏异常： <ul><li>最简单无脑的方式：卸载根节点下的dom</li><li>如何让渲染函数出错</li></ul></li><li>思考： <ul><li>判断根节点下的dom是否渲染成功，有一种从现象推到本质的样子，正确的做法还是应该找到造成白屏的真正原因，比如到底是因为什么错误导致浏览器渲染失败的？</li><li>白屏的原因：渲染过程中发生异常，但是我们没有捕获异常并处理</li><li>渲染的异常处理不同框架是不一样的，这里针对vue框架</li><li>监听渲染流程？？</li></ul></li><li>存在的问题： <ul><li>白屏异常没有实现监控，只是自己出发后进行判断——已解决</li></ul></li></ol><p>**两种情况：**白屏异常我们考虑了两种情况，一种是页面全部白屏没有任何内容，一种是除侧边导航栏以及顶栏部分其它部分全部空白。</p><p>**判断白屏异常的方法：**对于白屏异常的监控我们采用从现象推导本质的方法，当页面的主要DOM节点渲染失败时，就会出现白屏现象，所以我们对body节点进行监听，判断body节点下的dom是否被卸载，从而判断白屏异常。</p><p>**监听DOM节点的方法：**我们通过使用MutationObServer实例来监听body元素的子树的变化，当body元素的子孙节点发生改变时，将会调用MutationObServer指定的回调函数，回调函数中将判断节点是否卸载或者节点是否有内容，当主要节点被卸载或者节点下的标签为空，则会向后端上报白屏异常数据信息。</p><p><strong>上报白屏异常的情况：</strong></p><ol><li>body节点存在但是无内容，上报异常</li><li>app节点存在但是无内容，上报异常（注：app节点是项目根节点）</li><li>app节点有内容，但是main区域无内容，上报异常</li><li>app节点不存在，上报异常</li></ol><p><strong>监听DOM节点的代码如下：</strong></p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">monitorWhiteScreen</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//观察body节点的变化</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">=this;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">childList</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">subtree</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">};</span><span style="color:#676E95;font-style:italic;">//观察器的配置          </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">callback</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">mutationRecords</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">observer</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">// 当观察到变动时执行的回调函数</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">appNode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)  </span><span style="color:#676E95;font-style:italic;">//页面根节点</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">contentNode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.el-main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)  </span><span style="color:#676E95;font-style:italic;">//内容区域根节点</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">body</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postWhiteScreenError</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// body节点存在但是没内容,上报异常</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#A6ACCD;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">appNode</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">appNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postWhiteScreenError</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// app节点存在但是没内容,上报异常</span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#A6ACCD;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">contentNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postWhiteScreenError</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">//app节点有内容，但是main区域没内容，上报异常</span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#A6ACCD;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">postWhiteScreenError</span><span style="color:#F07178;">()</span><span style="color:#676E95;font-style:italic;">//app节点不存在,上报异常</span></span>
<span class="line"><span style="color:#F07178;">                    </span><span style="color:#A6ACCD;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">observer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">MutationObserver</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">callback</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">// 创建一个观察器实例并传入回调函数</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="_2-性能数据监控" tabindex="-1">2. 性能数据监控 <a class="header-anchor" href="#_2-性能数据监控" aria-hidden="true">#</a></h2><ul><li>性能指标监控：（性能观察者条目） <ul><li>FP、</li><li>FCP、</li><li>DNSTime：DNS解析耗时，domainLookupEnd – domainLookupStart</li><li>response：响应数据传输耗时，可观察网络是否正常，responseEnd – responseStart</li><li>DOM Ready(domContentLoadedEventEnd – fetchStart)：dom阶段渲染耗时</li><li>resource：资源加载耗时，domcomplete - domcontentLoadedEventEnd</li><li>firstPackage：首包耗时，从DNS解析完成到响应返回给浏览器第一个字节的时间。responseStart-domainLookupStart</li></ul></li><li>使用PerformanceObserver 的 API以及window.performance获取指标信息</li></ul><h2 id="_3-性能优化" tabindex="-1">3. 性能优化 <a class="header-anchor" href="#_3-性能优化" aria-hidden="true">#</a></h2><ul><li><p>从两个方面，一是页面的加载时间优化，二是提高页面的运行效率（就是页面交互更加的流畅）</p></li><li><p>页面加载时间的优化：</p><ul><li>需要考虑从浏览器输入url到页面渲染完成发生的事情，比如dns查询、建立tcp连接，发送请求，服务端发送响应数据，解析html构建dom树，构建渲染树，布局渲染树，绘制渲染树（在构建渲染树之后，会有FP（白屏时间）,首屏时间，用户可交互（domcontentloaded），加载完成load）</li><li>优化dns查询时间：可以采用dns预解析dns-prefetch，域名收敛(解决dns查询耗时的问题)、域名发散（浏览器对同一域名的最大连接数做了限制） <ul><li>使用CDN技术，将页面资源分发到全球各地的CDN节点，提高资源的缓存命中率，降低DNS解析时间。</li><li>缓存DNS查询结果，降低反复查询DNS的次数。</li><li>将DNS预取链接添加到HTML头部，浏览器在请求页面时就能够同时解析DNS记录，降低DNS解析时间</li></ul></li><li></li></ul></li><li><p>优化FP，FCP：页面首次渲染内容的时间。</p><ul><li><p>压缩图片</p></li><li><p>把js脚本放在页面底部，避免js阻塞页面的渲染</p><ul><li>避免js的阻塞，貌似也可以使用defer和async，作用于外联脚本</li><li>defer：异步加载脚本，等到所有的页面渲染完成之后，再去加载并执行该脚本。异步加载脚本的执行顺序和它们在文档中出现的顺序一致</li><li>async：异步加载脚本，但是它属于不会阻塞页面的渲染，</li></ul></li><li><p>延迟加载，把非关键资源图片和视频，设置为延迟加载，等页面加载完成之后再加载</p><ul><li>延迟加载的方法，可以使用data-lazy属性进行标记，再对domcontentloaded时间监听</li></ul></li><li><p>使用CDN，内容分发网络，比如把静态资源放在CDN上，加速网络加载速度</p><ol><li>静态资源缓存：将静态资源（如图片、视频和CSS文件）缓存在CDN中，可以减轻源服务器的负担，同时可以加速网站加载速度。</li><li>动态内容路由：将动态内容路由到最近的CDN节点，可以减少网络延迟和带宽占用。</li><li>加速HTTPS：使用CDN可以加速HTTPS连接，减少握手时间和数据传输时间。</li><li>负载均衡：使用CDN可以实现负载均衡，将流量分配到不同的CDN节点上，避免单一节点过载。</li><li>边缘计算：CDN可以提供边缘计算服务，将计算任务分布到最近的CDN节点上，减少数据传输时间和网络延迟。</li><li>安全加速：CDN可以提供安全加速服务，包括DDoS攻击防护、Web应用程序防火墙等，提高网站的安全性和可靠性。</li></ol><p>总之，使用CDN可以提高网站的性能和可靠性，减少用户等待时间和网络延迟，提高用户体验和访问量。</p></li><li><p>使用SSR服务器端渲染，服务器端直接把数据渲染在了html中，客户端只需要展示即可</p></li></ul></li></ul><h2 id="_4-性能条目" tabindex="-1">4. 性能条目 <a class="header-anchor" href="#_4-性能条目" aria-hidden="true">#</a></h2><ol><li>FP和FCP</li></ol><ul><li><p>可以通过performanceObserver的observe指定要观察的性能条目的集合。FP和FCP在paint这个性能条目集合中，性能条目集合也就是<code>PerformanceEntry.entryType</code></p></li><li><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">PerformanceObserver</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">entryList</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entryList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntriesByName</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">first-paint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">entry</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">paint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div></li><li><p>performanceEntry.entryType有以下几种</p><ol><li><code>navigation</code> ：页面导航性能指标</li><li><code>paint</code>：页面渲染指标</li><li><code>resource</code>：资源性能指标，如图片、样式表、脚本等</li><li><code>mark</code>：用户自定义时间戳指标</li><li><code>measure</code>：用户自定义时间区间指标</li></ol></li><li><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;font-style:italic;">// FP,FCP可在性能条目集合paint中观察到</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> callback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">entryList</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">        </span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entryList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntries</span><span style="color:#F07178;">()) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">first-paint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">) </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">FP</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">startTime</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">first-contentful-paint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">) </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">FP</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">startTime</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">PerformanceObserver</span><span style="color:#A6ACCD;">(callback)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">paint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">buffered</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 导航性能指标可在性能条目集合navigation中观察到</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> callback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">entryList</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">        </span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entry</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">entryList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntries</span><span style="color:#F07178;">()) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">entry</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">PerformanceObserver</span><span style="color:#A6ACCD;">(callback)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">navigation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">buffered</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div></li><li><p>导航性能指标</p><ul><li>navigationStart：浏览器开始加载页面时的时间戳。</li><li>fetchStart：浏览器开始获取页面资源的时间戳。</li><li>domainLookupStart：浏览器开始进行域名解析的时间戳。</li><li>connectStart：浏览器开始建立与服务器的连接的时间戳。</li><li>requestStart：浏览器开始发送请求的时间戳。</li><li>responseStart：浏览器开始接收服务器响应的时间戳。</li><li>domLoading：浏览器开始解析页面DOM树的时间戳。</li><li>domInteractive：浏览器完成DOM解析、文档状态为interactive（可交互）的时间戳。</li><li>domContentLoadedEventStart：DOM树解析完成，所有需要执行的脚本开始执行的时间戳。</li><li>domContentLoadedEventEnd：所有需要执行的脚本执行完成的时间戳。</li><li>loadEventStart：浏览器开始加载页面所有资源的时间戳。</li><li>loadEventEnd：浏览器页面加载完成的时间戳。</li></ul></li><li><p>首屏时间和白屏时间</p><ul><li><p>白屏时间反映的是用户在浏览器中打开页面后遇到空白页面的时间，一般是从浏览器开始加载网页到浏览器开始解析DOM文档之间的时间。在加载页面过程中，浏览器会逐步渲染页面，即在空白页面上显示出元素（如文字、图片等）。当页面的DOM树被解析完成后，就可以显示出页面的基本框架，此时白屏时间也就结束了。因此，白屏时间的计算方法是：<code>**domInteractive - domLoading**</code>，即DOM解析完成的时间减去文档开始加载的时间。</p><p>而首屏时间是反映用户在浏览器中打开页面后，第一次看到完整的页面所需要的时间。常用的计算方法是：<code>domContentLoadedEventEnd - navigationStart</code>，即DOMContentLoaded事件结束时刻减去导航开始时刻。DOMContentLoaded事件表示DOM树构建完成后所触发的事件，此时页面已经可以显示完整的文本内容和基本的图像。因此，<code>**domContentLoadedEventEnd - navigationStart**</code>就反映了用户浏览到页面所有主要内容（如文本、图像、视频等）的时间。</p></li></ul></li></ul><ol start="2"><li>DOM渲染完毕的时间和window.onload的时间不是一个时间 <ul><li>DOM渲染的时间：<code>domComplete - domloading</code></li><li>window.onload的时间要晚于DOM渲染的时间，window.onload是页面中所有资源加载完毕后才执行的。<code>loadEventEnd</code></li></ul></li></ol></div></div></main><footer class="VPDocFooter" data-v-79ca2460 data-v-04568844><div class="edit-info" data-v-04568844><!----><div class="last-updated" data-v-04568844><p class="VPLastUpdated" data-v-04568844 data-v-0ce8c960>Last updated: <time datatime="2023-06-13T09:17:54.000Z" data-v-0ce8c960></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"algorithm_leetcode.md\":\"9c634faf\",\"algorithm_输入输出.md\":\"9650a616\",\"blog_actions.md\":\"22a51e29\",\"blog_generator.md\":\"c59426f5\",\"engineering_gulp.md\":\"a6e6eef1\",\"engineering_webpack.md\":\"8797f2ee\",\"frontend_readme.md\":\"d79ce4c7\",\"frontend_browser.md\":\"b9f90475\",\"frontend_css.md\":\"ed928c8e\",\"frontend_http.md\":\"54ddf786\",\"frontend_javascript.md\":\"8bc1895d\",\"frontend_less.md\":\"6f2c3c7c\",\"frontend_nodejs.md\":\"1dd16b23\",\"index.md\":\"84d12a88\",\"me_index.md\":\"810e0559\",\"react_readme.md\":\"59cf75bf\",\"tools_git.md\":\"135d748e\",\"vue_vue.md\":\"69cb63ff\",\"前端监控系统.md\":\"dd3a403c\",\"大杂烩-前端学习笔记.md\":\"5f1f9858\",\"手写题.md\":\"e0f97429\",\"面试.md\":\"4f51c110\",\"面试题.md\":\"f8b9d6be\"}")</script>
    <script type="module" async src="/documents/assets/app.c840745f.js"></script>
    
  </body>
</html>