# HTTP

## 1. 从输入url到展示页面的全过程

1. URL解析

   * 协议+ip+端口+路径+参数+锚点

   <img src=".\img\url解析.png" style="zoom: 67%;" />

2. DNS查询，获取ip

   * 先访问本地host文件、然后是本地域名服务器、根服务器、....
   * 过程中涉及递归查询和迭代查询
   * 目的是获取ip地址

3. 建立TCP连接

   * TCP三次握手，TCP面向连接的协议

4. 发送HTTP请求

   * 请求行、请求头、请求体
   * 请求行包括：请求方式、请求地址和http协议及版本

5. 拿到HTTP响应结果

   * 状态行、响应头、响应体

6. 渲染页面

   * 解析HTML，构建DOM树
   * 解析CSS，建立CSS规则树
   * 合并DOM树和css规则树，生成render树
   * 布局render树，负责各元素的尺寸和位置的计算
   * 绘制render树，绘制页面像素信息
   * 浏览器会将各层的信息发送给 GPU，GPU 会将各层合成（ composite ），显示在屏幕上